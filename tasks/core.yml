- name: Ubuntu | Install Ubuntu-only core packages
  package: name={{ item }}
  when: is_ubuntu
  with_items:
    - build-essential
    - xsel

- name: Ubuntu | Install OpenSSH server
  package: name={{ item }}
  when: is_ubuntu
  with_items:
    - openssh-server

- name: Ubuntu | Install Samba client
  package: name={{ item }}
  when: is_ubuntu
  with_items:
    - smbclient

# - name: Install ubuntu-restricted-extras
#   package: name=ubuntu-restricted-extras
#   when: is_ubuntu
#   ignore_errors: True # case multiverse repo is not enabled

# - name: Install OSX-only core packages
#   package: name={{ item }}
#   when: is_osx
#   with_items:
#     - coreutils
#     - findutils
#     - gawk
#     - gnu-getopt
#     - gnu-indent
#     - gnu-sed
#     - gnu-tar
#     - gnutls
#     - gpg
#     - grc
#     - pstree
#     - unrar
#     - watch

- name: Install core packages
  package: name={{ item }}
  with_items:
    - curl
    - git
    - htop
    - vim
    - wget
    - zsh
    - ncdu
    - tree

- name: Install useful tools
  package: name={{ item }}
  with_items:
    - jq   

- name: Gets the zsh path
  shell: which zsh
  register: bin_zsh

- name: Add homebrew zsh to /etc/shells
  lineinfile: dest=/etc/shells line='{{ bin_zsh.stdout }}'
  become: True
